{"version":3,"file":"src_app_acoes_acoes_module_ts.js","mappings":";;;;;;;;;;;;;;;;;AACuD;AACJ;;;AAE5C,MAAM,MAAM,GAAW;IAC5B;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4DAAc;KAC1B;CACF,CAAC;AAMK,MAAM,kBAAkB;;oFAAlB,kBAAkB;+GAAlB,kBAAkB;mHAHpB,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC,EAC9B,yDAAY;mIAEX,kBAAkB,oFAFnB,yDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;ACb+E;AAE1D;;;;;;;;ICMvC,yEAAgD;IAC9C,+EAA+C;IACjD,4DAAM;;;IADY,0DAAa;IAAb,yEAAa;;;IAHnC,yEAA6E;IAEzE,gHAEM;IACR,4DAAM;;;IAHkC,0DAAQ;IAAR,6EAAQ;;;IAK1B,oEAAG;IAAA,iFAAY;IAAA,4DAAI;;ADP7C,MAAM,gBAAgB,GAAG,GAAG;AAOrB,MAAM,cAAc;IAmBzB,YAAoB,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;QAlB9C,eAAU,GAAG,IAAI,uDAAW,EAAE,CAAC;QAC/B,gBAAW,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,IAAI,CAC7C,yCAAG,CAAC,GAAG,EAAE;YACP,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC/B,CAAC,CAAC,CACH,CAAC;QACF,qBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,CAClD,kDAAY,CAAE,gBAAgB,CAAC,EAC/B,yCAAG,CAAC,GAAG,EAAE;YACP,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACjC,CAAC,CAAC,EACF,yCAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAChB,4CAAM,CAAC,CAAC,aAAa,EAAC,EAAE,cAAa,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAC3E,0DAAoB,EAAE,EACtB,+CAAS,CAAC,CAAC,aAAa,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CACxE,CAAC;QACF,WAAM,GAAG,2CAAK,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAEP,CAAC;;4EAnBvC,cAAc;4GAAd,cAAc;QCb3B,qFAAiC;QAG3B,yEAAgE;QAClE,4DAAM;QAER,0GAMM;;QACN,sMAAyD;QAC3D,4DAAkB;;;QAXc,0DAA0B;QAA1B,uFAA0B;QAG1B,0DAAqB;QAArB,6IAAqB;;;;;;;;;;;;;;;;;;;;;;ACLN;AAEa;AACT;AACI;AACgB;;AAWhE,MAAM,WAAW;;sEAAX,WAAW;wGAAX,WAAW;4GANb;YACP,yDAAY;YACZ,qEAAkB;YAClB,+DAAY;SACb;mIAEU,WAAW,mBAPP,4DAAc,EAAE,gFAAkB,aAE/C,yDAAY;QACZ,qEAAkB;QAClB,+DAAY;;;;;;;;;;;;;;;;;;;;;ACd+C;AACD;AAEb;;;AAGjD,MAAM,GAAG,GAAG,sEAAe;AAIpB,MAAM,YAAY;IACvB,YAAoB,UAAsB;QAAtB,eAAU,GAAV,UAAU,CAAY;IAAG,CAAC;IAE9C,QAAQ,CAAC,KAAc;QACrB,MAAM,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,4DAAU,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAC3E,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAW,GAAG,GAAG,QAAQ,EAAC,EAAC,MAAM,EAAC,CAAC;aAC5D,IAAI,CACH,mDAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EACpC,qDAAK,CAAC,SAAS,CAAC,EAChB,mDAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CACZ,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CACjE,CACF,CAAC;IACJ,CAAC;IACO,eAAe,CAAC,KAAW,EAAE,KAAW;QAC9C,IAAI,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,EAAE;YAC/B,OAAO,CAAC,CAAC;SACV;aAAM,IAAI,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,EAAE;YACtC,OAAO,CAAC,CAAC,CAAC;SACX;;YAAM,OAAO,CAAC,CAAC;IAClB,CAAC;;wEApBU,YAAY;6GAAZ,YAAY,WAAZ,YAAY,mBAFX,MAAM;;;;;;;;;;;;;;;;;;;ACAb,MAAM,kBAAkB;IAG7B,gBAAe,CAAC;IAEhB,QAAQ,KAAU,CAAC;;oFALR,kBAAkB;gHAAlB,kBAAkB;QCR/B,0EAMY;;QALV,oFAAuB;;;;;;;;;;;;;;;;;ACDG;AACrB;AACP;AACA;AACA;AACA;AACA,WAAW,yCAAG;AACd;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL","sources":["./src/app/acoes/acoes-routing.module.ts","./src/app/acoes/acoes.component.ts","./src/app/acoes/acoes.component.html","./src/app/acoes/acoes.module.ts","./src/app/acoes/acoes.service.ts","./src/app/acoes/card-acoes/card-acoes.component.ts","./src/app/acoes/card-acoes/card-acoes.component.html","./node_modules/rxjs/dist/esm/internal/operators/pluck.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AcoesComponent } from './acoes.component';\n\nexport const routes: Routes = [\n  {\n    path: '',\n    component: AcoesComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AcoesRoutingModule {}\n","import { debounceTime, distinctUntilChanged, filter, merge, Subscription, switchMap, tap } from 'rxjs';\nimport { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nimport { AcoesService } from './acoes.service';\n\nconst ESPERA_DIGITACAO = 300\n\n@Component({\n  selector: 'app-acoes',\n  templateUrl: './acoes.component.html',\n  styleUrls: ['./acoes.component.css'],\n})\nexport class AcoesComponent {\n  acoesInput = new FormControl();\n  todasAcoes$ = this.acoesService.getAcoes().pipe(\n    tap(() => {\n      console.log('fluxo inicial');\n    })\n  );\n  filtroPeloInput$ = this.acoesInput.valueChanges.pipe(\n    debounceTime (ESPERA_DIGITACAO),\n    tap(() => {\n      console.log('fluxo do filtro');\n    }),\n    tap(console.log),\n    filter((valorDigitado)=>valorDigitado.length >= 3 || !valorDigitado.length),\n    distinctUntilChanged(),\n    switchMap((valorDigitado) => this.acoesService.getAcoes(valorDigitado))\n  );\n  acoes$ = merge(this.todasAcoes$, this.filtroPeloInput$);\n\n  constructor(private acoesService: AcoesService) {}\n}\n","<po-page-default p-title=\"Ações\">\n  <div class=\"po-row\">\n    <div class=\"po-xl-6 po-lg-6 po-md-6 po-sm-6\">\n      <po-input p-label=\"Ações\" [formControl]=\"acoesInput\"></po-input>\n    </div>\n  </div>\n  <div class=\"td-page-wrapper\" *ngIf=\"acoes$ | async as acoes; else elseBlock\">\n    <div class=\"po-row\">\n      <div class=\"po-md-4\" *ngFor=\"let acao of acoes\">\n        <app-card-acoes [acao]=\"acao\"></app-card-acoes>\n      </div>\n    </div>\n  </div>\n  <ng-template #elseBlock><p>Não há dados</p></ng-template>\n</po-page-default>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AcoesRoutingModule } from './acoes-routing.module';\nimport { AcoesComponent } from './acoes.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { CardAcoesComponent } from './card-acoes/card-acoes.component';\n\n\n@NgModule({\n  declarations: [AcoesComponent, CardAcoesComponent],\n  imports: [\n    CommonModule,\n    AcoesRoutingModule,\n    SharedModule\n  ]\n})\nexport class AcoesModule { }\n","import { environment } from './../../environments/environment';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { map, pluck, tap } from 'rxjs/operators';\nimport { Acao, AcoesAPI } from './modelo/acoes';\n\nconst API = environment.api\n@Injectable({\n  providedIn: 'root',\n})\nexport class AcoesService {\n  constructor(private httpClient: HttpClient) {}\n\n  getAcoes(valor?: string) {\n    const params = valor ? new HttpParams().append('valor', valor) : undefined;\n    return this.httpClient.get<AcoesAPI>(`${API}/acoes`,{params})\n    .pipe(\n      tap((valor) => console.table(valor)),\n      pluck('payload'),\n      map((acoes) =>\n        acoes.sort((acaoA, acaoB) => this.ordenaPorCodigo(acaoA, acaoB))\n      )\n    );\n  }\n  private ordenaPorCodigo(acaoA: Acao, acaoB: Acao) {\n    if (acaoA.codigo > acaoB.codigo) {\n      return 1;\n    } else if (acaoA.codigo > acaoB.codigo) {\n      return -1;\n    } else return 0;\n  }\n}\n","import { Component, Input, OnInit, ViewEncapsulation } from '@angular/core';\n\n@Component({\n  selector: 'app-card-acoes',\n  templateUrl: './card-acoes.component.html',\n  styleUrls: ['./card-acoes.component.css'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class CardAcoesComponent implements OnInit {\n  @Input() acao: any;\n\n  constructor() {}\n\n  ngOnInit(): void {}\n}\n","<po-widget\n  [p-title]=\"acao.codigo\"\n  [p-primary-label]=\"acao.descricao\"\n  [p-secondary-label]=\"acao.preco\"\n  p-size=\"po-sm-12\"\n>\n</po-widget>\n","import { map } from './map';\nexport function pluck(...properties) {\n    const length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return map((x) => {\n        let currentProp = x;\n        for (let i = 0; i < length; i++) {\n            const p = currentProp === null || currentProp === void 0 ? void 0 : currentProp[properties[i]];\n            if (typeof p !== 'undefined') {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    });\n}\n"],"names":[],"sourceRoot":"webpack:///"}